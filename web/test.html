<!DOCTYPE html>
<html>
<head>
    <title>Simple GIF Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 10px 20px; margin: 10px; }
        .result { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1>Simple GIF Creation Test</h1>
    
    <button onclick="testGif()">Create Test GIF</button>
    <div id="result" class="result"></div>

    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
    
    <script>
        function testGif() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Creating test GIF...';
            
            try {
                if (typeof GIF === 'undefined') {
                    resultDiv.innerHTML = 'Error: gif.js not loaded';
                    return;
                }
                
                console.log('Creating GIF with gif.js...');
                
                const gif = new GIF({
                    workers: 1,
                    quality: 10,
                    width: 100,
                    height: 100
                });
                
                // Create 3 simple colored frames
                const colors = ['#ff0000', '#00ff00', '#0000ff'];
                
                for (let i = 0; i < colors.length; i++) {
                    const canvas = document.createElement('canvas');
                    canvas.width = 100;
                    canvas.height = 100;
                    const ctx = canvas.getContext('2d');
                    ctx.fillStyle = colors[i];
                    ctx.fillRect(0, 0, 100, 100);
                    gif.addFrame(canvas, { delay: 500 });
                    console.log(`Added frame ${i + 1}`);
                }
                
                gif.on('finished', function(blob) {
                    console.log('GIF finished! Size:', blob.size);
                    resultDiv.innerHTML = `GIF created successfully! Size: ${blob.size} bytes<br>
                        <a href="${URL.createObjectURL(blob)}" download="test.gif">Download Test GIF</a>`;
                });
                
                gif.on('progress', function(p) {
                    console.log('Progress:', p);
                    resultDiv.innerHTML = `Creating GIF... ${Math.round(p * 100)}%`;
                });
                
                gif.on('error', function(error) {
                    console.error('Error:', error);
                    resultDiv.innerHTML = `Error: ${error.message}`;
                });
                
                console.log('Starting render...');
                gif.render();
                
            } catch (error) {
                console.error('Exception:', error);
                resultDiv.innerHTML = `Exception: ${error.message}`;
            }
        }
    </script>
</body>
</html>

