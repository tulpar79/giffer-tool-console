<!DOCTYPE html>
<html>
<head>
    <title>GIF Creation Test</title>
</head>
<body>
    <h1>GIF Creation Test</h1>
    <p>This is a simple test to verify gif.js is working correctly.</p>
    
    <canvas id="testCanvas" width="100" height="100" style="border: 1px solid black;"></canvas>
    <br><br>
    <button onclick="testGifCreation()">Test GIF Creation</button>
    <div id="result"></div>

    <script src="https://cdn.jsdelivr.net/npm/gif.js@0.2.0/dist/gif.js"></script>
    <script>
        function testGifCreation() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Creating test GIF...';
            
            // Create a simple test GIF with colored frames
            const gif = new GIF({
                workers: 2,
                quality: 10,
                width: 100,
                height: 100
            });

            // Create test frames
            const colors = ['#ff0000', '#00ff00', '#0000ff'];
            
            for (let i = 0; i < colors.length; i++) {
                const canvas = document.createElement('canvas');
                canvas.width = 100;
                canvas.height = 100;
                const ctx = canvas.getContext('2d', { willReadFrequently: true });
                
                ctx.fillStyle = colors[i];
                ctx.fillRect(0, 0, 100, 100);
                
                gif.addFrame(canvas, { delay: 500 });
            }

            gif.on('finished', function(blob) {
                resultDiv.innerHTML = 'GIF created successfully! Size: ' + blob.size + ' bytes';
                
                // Create download link
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'test.gif';
                a.textContent = 'Download Test GIF';
                resultDiv.appendChild(document.createElement('br'));
                resultDiv.appendChild(a);
            });

            gif.on('progress', function(p) {
                resultDiv.innerHTML = 'Creating test GIF... ' + Math.round(p * 100) + '%';
            });

            gif.on('error', function(error) {
                resultDiv.innerHTML = 'Error: ' + error.message;
            });

            gif.render();
        }
    </script>
</body>
</html>

